<div class="container">

  <h2>List of Plots</h2>

  <!-- SEARCH -->
  <div class="search-container">
    <input type="text" [(ngModel)]="searchLayoutName" (keyup)="filterPlots()" placeholder="Search Layout Name"
      class="search-input">

    <input type="text" [(ngModel)]="searchPlotNo" (keyup)="filterPlots()" placeholder="Search Plot No"
      class="search-input">

    <button class="search-btn" (click)="filterPlots()">Search</button>
  </div>

  <!-- REPORT BUTTON -->
  <div class="top-buttons">
    <button class="btn btn-primary" style="margin-left: auto;" (click)="downloadPlotsReport()">
      <i class="fa fa-file-pdf"></i> Download Plots PDF
    </button>
  </div>

  <!-- TABLE CARD container -->
  <div class="table-wrapper">
    <table class="layout-table">
      <thead>
        <tr>
          <th>S.No</th>
          <th>Layout</th>
          <th>Plot</th>
          <th>Survey No</th>
          <th>Owner</th>
          <th>Sqft</th>
          <th>Dir</th>
          <th>Price</th>
          <th>Mobile</th>
          <th>DTCP</th>
          <th>RERA</th>
        </tr>
      </thead>

      <tbody *ngIf="plots.length > 0">
        <tr *ngFor="let plot of plots | slice:(currentPage-1)*pageSize:(currentPage)*pageSize; let i = index">
          <td>{{ (currentPage - 1) * pageSize + i + 1 }}</td>
          <td>{{ plot.layout?.layoutName }}</td>
          <td>{{ plot.plotNo }}</td>
          <td>{{ plot.surveyNo }}</td>
          <td>{{ plot.ownerName }}</td>
          <td>{{ plot.sqft }}</td>
          <td>{{ plot.direction }}</td>
          <td>â‚¹ {{ plot.price }}</td>
          <td>{{ plot.mobile }}</td>
          <td>{{ plot.dtcpApproved ? 'Yes' : 'No' }}</td>
          <td>{{ plot.reraApproved ? 'Yes' : 'No' }}</td>
        </tr>
      </tbody>

      <!-- Empty state inside table -->
      <tbody *ngIf="plots.length === 0">
        <tr>
          <td colspan="11" class="no-records-cell">
            <div class="no-records-msg">
              <i class="fa fa-info-circle"></i> No Records Found
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Pagination inside the same card -->
    <app-pagination *ngIf="plots.length > 5" [totalItems]="plots.length" [pageSize]="pageSize"
      [currentPage]="currentPage" (pageChange)="currentPage = $event"
      (pageSizeChange)="pageSize = $event; currentPage = 1">
    </app-pagination>
  </div>

  <!-- Footer buttons outside the card -->
  <div class="pagination-container">
    <button class="btn btn-danger pagination-home-btn" (click)="goHome()">
      Home
    </button>
  </div>

</div>