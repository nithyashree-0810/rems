<div class="main-container">

  <h2 class="title">List of Plots</h2>

  <!-- ðŸ”¹ Search Bar -->
  <div class="search-bar mb-3">
    <input type="text"
           [(ngModel)]="searchLayoutName"
           placeholder="Search by layout name"
           class="search-input" />

    <button class="btn search-btn" (click)="searchPlotsByLayout()">
      <i class="fa fa-search"></i> Search
    </button>

    <button class="btn reset-btn" (click)="loadPlots()">
      Reset
    </button>

    <span class="search-message" *ngIf="searchMessage">{{ searchMessage }}</span>
  </div>

  <div class="top-bar">
    <button class="add-btn" routerLink="/create-plot">
      <i class="fa fa-plus"></i> Create Plot
    </button>
  </div>

  <div class="table-card">

    <table>
      <thead>
        <tr>
          <th>S.NO</th>
          <th>LAYOUT NAME</th>
          <th>PLOT NO</th>
          <th>OWNER NAME</th>
          <th>SQFT</th>
          <th>DIRECTION</th>
          <th>PRICE</th>
          <th>MOBILE</th>
          <th>DTCP APPROVED</th>
          <th>RERA APPROVED</th>
          <th>ACTIONS</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let plot of plots | slice:(currentPage-1)*pageSize:(currentPage)*pageSize; let i = index">

          <td>{{ (currentPage - 1) * pageSize + i + 1 }}</td>
          <td class="left-align">{{ plot.layout?.layoutName }}</td>
          <td>{{ plot.plotNo }}</td>
          <td>{{ plot.ownerName }}</td>
          <td>{{ plot.sqft }}</td>
          <td>{{ plot.direction }}</td>
          <td class="price">â‚¹ {{ plot.price }}</td>
          <td>{{ plot.mobile }}</td>
          <td class="center-align">{{ plot.dtcpApproved ? 'Yes' : 'No' }}</td>
          <td class="center-align">{{ plot.reraApproved ? 'Yes' : 'No' }}</td>

          <td class="action-col">
            <span class="icon view" (click)="viewPlot(plot)">
              <i class="fa fa-eye"></i>
            </span>

            <span class="icon edit" (click)="editPlot(plot)">
              <i class="fa fa-pencil"></i>
            </span>

            <span class="icon delete" (click)="deletePlot(plot)">
              <i class="fa fa-trash"></i>
            </span>

            <span class="icon book" (click)="bookPlot(plot)">
              <i class="fa fa-book"></i>
            </span>
          </td>

        </tr>
      </tbody>

    </table>
  </div>

  <div class="pagination-wrapper">
    <div class="pagination-section">
      <button class="page-btn" [disabled]="currentPage === 1" (click)="prevPage()">Â« Prev</button>

      <button *ngFor="let page of totalPagesArray"
              class="page-number"
              [class.active]="currentPage === page"
              (click)="goToPage(page)">
        {{ page }}
      </button>

      <button class="page-btn" [disabled]="currentPage === totalPages" (click)="nextPage()">Next Â»</button>
    </div>

    <button class="home-btn" (click)="goHome()">Home</button>
  </div>

</div>
