<div class="container">

  <h2>List of Customers</h2>

  <!-- ðŸ” TABBED SEARCH SECTION -->
  <div class="search-container-glass">
    <!-- TABS NAVIGATION -->
    <div class="search-tabs">
      <div class="tabs-left">
        <div class="tab-item" [class.active]="activeSearchTab === 'general'" (click)="activeSearchTab = 'general'">
          <i class="fa fa-user"></i> General Search
        </div>
        <div class="tab-item" [class.active]="activeSearchTab === 'referral'" (click)="activeSearchTab = 'referral'">
          <i class="fa fa-user-friends"></i> Referral Based Search
        </div>
      </div>

      <button class="pdf-btn-inside" (click)="downloadEnquiriesReport()">
        <i class="fa fa-file-pdf"></i> Download Customers PDF
      </button>
    </div>

    <!-- TAB CONTENT -->
    <div class="search-content">
      <!-- ðŸ”¹ Card 1 â€“ General Search -->
      <div class="search-flex-row" *ngIf="activeSearchTab === 'general'">
        <div class="input-group">
          <input type="text" [(ngModel)]="searchName" (input)="onSearch()" (keyup.enter)="onSearch()"
            placeholder="First/Last Name" class="search-input">

          <input type="text" [(ngModel)]="searchMobile" (input)="onSearch()" (keyup.enter)="onSearch()"
            placeholder="Mobile Number" class="search-input">

          <input type="text" [(ngModel)]="searchLayoutName" (input)="onSearch()" (keyup.enter)="onSearch()"
            placeholder="Layout Name" class="search-input">

          <input type="text" [(ngModel)]="searchAddress" (input)="onSearch()" (keyup.enter)="onSearch()"
            placeholder="Address" class="search-input">
        </div>

        <div class="button-group">
          <button class="clear-btn" (click)="onClear()">Reset</button>
          <button class="search-btn" (click)="onSearch()">
            <i class="fa fa-search"></i> Search
          </button>
        </div>
      </div>

      <!-- ðŸ”¹ Card 2 â€“ Referral Based Search -->
      <div class="search-flex-row" *ngIf="activeSearchTab === 'referral'">
        <div class="input-group">
          <input type="text" [(ngModel)]="searchReferral" (input)="onSearch()" (keyup.enter)="onSearch()"
            placeholder="Referral Name" class="search-input">

          <input type="text" [(ngModel)]="searchLocation" (input)="onSearch()" (keyup.enter)="onSearch()"
            placeholder="Location" class="search-input">
        </div>

        <div class="button-group">
          <button class="clear-btn" (click)="onClear()">Reset</button>
          <button class="search-btn referral-btn" (click)="onSearch()">
            <i class="fa fa-user-friends"></i> Search Referral
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- TABLE CARD container -->
  <div class="table-wrapper">
    <table class="layout-table">
      <thead>
        <tr>
          <th>Photo</th>
          <th>S.No</th>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Address</th>
          <th>Mobile</th>
        </tr>
      </thead>

      <tbody *ngIf="filteredData.length > 0">
        <tr *ngFor="let c of filteredData | slice:(currentPage-1)*pageSize:(currentPage)*pageSize; let i = index">
          <!-- Profile Image -->
          <td>
            <div class="img-wrapper">
              <img *ngIf="c.profileImagePath" [src]="imageUrl(c.profileImagePath)" alt="Photo">
            </div>
          </td>

          <td>{{ (currentPage - 1) * pageSize + i + 1 }}</td>
          <td>{{ c.firstName }}</td>
          <td>{{ c.lastName }}</td>
          <td>{{ c.address }}</td>
          <td>{{ c.mobileNo }}</td>
        </tr>
      </tbody>

      <!-- Empty state inside table -->
      <tbody *ngIf="filteredData.length === 0">
        <tr>
          <td colspan="6" class="no-records-cell">
            <div class="no-records-msg">
              <i class="fa fa-info-circle"></i> No Records Found
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Pagination inside the same card -->
    <app-pagination *ngIf="filteredData.length > 0" [totalItems]="filteredData.length" [pageSize]="pageSize"
      [currentPage]="currentPage" (pageChange)="currentPage = $event"
      (pageSizeChange)="pageSize = $event; currentPage = 1">
    </app-pagination>
  </div>

  <!-- Footer buttons outside the card -->
  <div class="pagination-container">
    <button class="btn btn-danger pagination-home-btn" (click)="goHome()">
      Home
    </button>
  </div>

</div>